# Return to default bindings first
# Reset all bindings to readline defaults
set keymap emacs

# -------------------------
# Completion Settings
# -------------------------

# Show full list of completions without truncation
set completion-prefix-display-length 0

# Show all possible completions immediately when ambiguous
set show-all-if-ambiguous on

# Show common prefix before cycling through completions
set menu-complete-display-prefix on

# Ignore case when completing
set completion-ignore-case on

# Treat hyphens and underscores as equivalent when completing
set completion-map-case on

# Display completions in columns
set print-completions-horizontally off

# Show extra file information when completing (like ls -F)
set visible-stats on

# Add trailing slash to completed directory names
set mark-directories on
set mark-symlinked-directories on

# Immediately show completions without needing to press Tab twice
set show-all-if-unmodified on

# Use colors when displaying completions
set colored-stats on
set colored-completion-prefix on

# Disable readline mouse support (let terminal handle mouse wheel scrolling)
set enable-bracketed-paste on

# -------------------------
# History Settings
# -------------------------

# Enable incremental history searching with up/down arrows
# These will be bound below in the key bindings section

# -------------------------
# Editing Settings
# -------------------------

# Use Vi or Emacs mode (emacs is default)
set editing-mode emacs

# Enable 8-bit input (for special characters)
set input-meta on
set output-meta on
set convert-meta off

# Ring bell style (none, visible, audible)
set bell-style none

# -------------------------
# Key Bindings
# -------------------------
# NOTE: These bindings are tmux-compatible
# Avoiding Ctrl+B (tmux prefix) for word navigation
# Using Ctrl+Arrow and Alt+Letter combinations instead

# Tab completion cycles through matches (menu-complete)
TAB: menu-complete
# Shift+Tab cycles backward through matches
"\e[Z": menu-complete-backward

# History search with arrow keys (searches based on what you've typed)
"\e[A": history-search-backward  # Up arrow
"\e[B": history-search-forward   # Down arrow

# Word navigation (avoiding Ctrl+B which conflicts with tmux prefix)
"\e[1;5C": forward-word           # Ctrl+Right Arrow - jump forward one word
"\e[1;5D": backward-word          # Ctrl+Left Arrow - jump backward one word
"\ef": forward-word               # Alt+F - jump forward one word (emacs-style)
"\eb": backward-word              # Alt+B - jump backward one word (emacs-style)

# Line editing
"\C-k": kill-line                 # Ctrl+K - delete from cursor to end of line
"\C-u": backward-kill-line        # Ctrl+U - delete from cursor to start of line
"\C-w": backward-kill-word        # Ctrl+W - delete word backward

# Additional useful bindings
"\C-a": beginning-of-line         # Ctrl+A - go to beginning of line
"\C-e": end-of-line               # Ctrl+E - go to end of line
"\C-d": delete-char               # Ctrl+D - delete character under cursor (safe with tmux)
# Note: Ctrl+L conflicts with tmux clear-history, but we keep it for readline clear-screen
"\C-l": clear-screen              # Ctrl+L - clear screen